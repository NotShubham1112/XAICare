# Medical AI Platform - Production Environment Configuration
# HIPAA Compliant Production Environment Variables

# ===========================================
# APPLICATION SETTINGS
# ===========================================
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=false

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
DATABASE_URL=postgresql://medicalai_prod:${DATABASE_PASSWORD}@postgres-rw.medical-ai.svc.cluster.local:5432/medicalai_prod
DATABASE_READ_REPLICA_URL=postgresql://medicalai_prod:${DATABASE_PASSWORD}@postgres-ro.medical-ai.svc.cluster.local:5432/medicalai_prod
REDIS_URL=redis://redis-master.medical-ai.svc.cluster.local:6379
REDIS_SENTINEL_URLS=redis://redis-sentinel-0.medical-ai.svc.cluster.local:26379,redis://redis-sentinel-1.medical-ai.svc.cluster.local:26379,redis://redis-sentinel-2.medical-ai.svc.cluster.local:26379
MONGODB_URL=mongodb://medicalai_prod:${MONGODB_PASSWORD}@mongodb.medical-ai.svc.cluster.local:27017/medicalai_prod

# ===========================================
# STORAGE CONFIGURATION
# ===========================================
S3_ENDPOINT=https://minio.medical-ai.svc.cluster.local:443
S3_ACCESS_KEY=${MINIO_ACCESS_KEY}
S3_SECRET_KEY=${MINIO_SECRET_KEY}
DICOM_BUCKET=dicom-encrypted-prod
MODEL_BUCKET=models-prod
BACKUP_BUCKET=backups-prod

# ===========================================
# SECURITY & AUTHENTICATION
# ===========================================
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ALGORITHM=RS256
JWT_ISSUER=https://auth.medical-ai.com
JWT_AUDIENCE=medical-ai-platform

# Keycloak OAuth2/OpenID Connect
KEYCLOAK_URL=https://auth.medical-ai.com
KEYCLOAK_REALM=medical-ai
KEYCLOAK_CLIENT_ID=medical-ai-backend
KEYCLOAK_CLIENT_SECRET=${KEYCLOAK_CLIENT_SECRET}

# HIPAA Compliance Mode
HIPAA_COMPLIANCE_MODE=strict
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
PHI_ENCRYPTION_KEY=${PHI_ENCRYPTION_KEY}
DATA_RETENTION_YEARS=7

# ===========================================
# AI/ML CONFIGURATION
# ===========================================
TORCH_DEVICE=cuda
TORCH_CUDA_ARCH=7.5,8.0,8.6  # Tesla T4, A100, L40
MIXED_PRECISION=true
MODEL_CACHE_SIZE=5
INFERENCE_BATCH_SIZE=16
GPU_MEMORY_FRACTION=0.9

# Model Performance Thresholds
MIN_MODEL_ACCURACY=0.85
MIN_MODEL_AUC=0.90
MIN_MODEL_SENSITIVITY=0.85
MIN_MODEL_SPECIFICITY=0.80
MODEL_DRIFT_THRESHOLD=0.05

# ===========================================
# API & SERVICES
# ===========================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_TIMEOUT=30
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_PERIOD=60
API_CORS_ORIGINS=https://clinical-dashboard.medical-ai.com,https://admin.medical-ai.com

# Kong API Gateway
KONG_ADMIN_URL=http://kong-admin.medical-ai.svc.cluster.local:8001
KONG_PROXY_URL=https://api.medical-ai.com

# ===========================================
# MONITORING & OBSERVABILITY
# ===========================================
PROMETHEUS_URL=http://prometheus.medical-ai.svc.cluster.local:9090
GRAFANA_URL=https://monitoring.medical-ai.com
JAEGER_ENDPOINT=http://jaeger-collector.medical-ai.svc.cluster.local:4317
LOKI_URL=http://loki.medical-ai.svc.cluster.local:3100
ALERTMANAGER_URL=http://alertmanager.medical-ai.svc.cluster.local:9093

# Metrics Collection
METRICS_COLLECTION_INTERVAL=15
METRICS_RETENTION_DAYS=90
HEALTH_CHECK_INTERVAL=30

# ===========================================
# EXTERNAL INTEGRATIONS
# ===========================================
# DICOM/PACS Integration
PACS_AE_TITLE=MEDICAL_AI_PROD
PACS_HOST=pacs.medical-ai.com
PACS_PORT=104
PACS_TIMEOUT=30

# EHR Integration (HL7/FHIR)
EHR_BASE_URL=https://ehr.medical-ai.com/fhir/R4
EHR_CLIENT_ID=${EHR_CLIENT_ID}
EHR_CLIENT_SECRET=${EHR_CLIENT_SECRET}
EHR_TIMEOUT=60

# ===========================================
# BUSINESS LOGIC
# ===========================================
# Clinical Decision Thresholds
HIGH_RISK_THRESHOLD=0.9
MEDIUM_RISK_THRESHOLD=0.7
LOW_RISK_THRESHOLD=0.5
VERY_LOW_RISK_THRESHOLD=0.3

# Workflow Configuration
REQUIRE_PHYSICIAN_REVIEW=true
AUTO_APPROVE_LOW_RISK=false
ESCALATION_TIME_HOURS=24
FOLLOWUP_REMINDER_DAYS=30

# ===========================================
# PERFORMANCE & SCALING
# ===========================================
# Kubernetes Resource Limits
POD_CPU_REQUEST=1000m
POD_CPU_LIMIT=2000m
POD_MEMORY_REQUEST=2Gi
POD_MEMORY_LIMIT=4Gi
GPU_MEMORY_REQUEST=4Gi
GPU_MEMORY_LIMIT=8Gi

# Horizontal Pod Autoscaler
HPA_MIN_REPLICAS=2
HPA_MAX_REPLICAS=20
HPA_CPU_TARGET=70
HPA_MEMORY_TARGET=80
HPA_GPU_TARGET=75

# ===========================================
# BACKUP & DISASTER RECOVERY
# ===========================================
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM UTC
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}
DISASTER_RECOVERY_REGION=us-central1
DISASTER_RECOVERY_ZONE=us-central1-c

# ===========================================
# COMPLIANCE & AUDIT
# ===========================================
COMPLIANCE_MODE=strict
AUDIT_LOG_LEVEL=detailed
AUDIT_STORAGE_ENCRYPTED=true
GDPR_COMPLIANCE=true
CCPA_COMPLIANCE=true

# ===========================================
# FEATURE FLAGS
# ===========================================
ENABLE_MODEL_EXPLAINABILITY=true
ENABLE_BATCH_PROCESSING=true
ENABLE_REAL_TIME_PROCESSING=true
ENABLE_MULTICANCER_INFERENCE=true
ENABLE_RISK_STRATIFICATION=true
ENABLE_CLINICAL_WORKFLOW_INTEGRATION=true

# ===========================================
# THIRD-PARTY SERVICES
# ===========================================
# Email Notifications
SMTP_SERVER=smtp.medical-ai.com
SMTP_PORT=587
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
EMAIL_FROM=noreply@medical-ai.com

# SMS Notifications (for critical alerts)
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_FROM_NUMBER=${TWILIO_FROM_NUMBER}

# Slack Notifications
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
SLACK_CHANNEL=#medical-ai-alerts

# ===========================================
# DEVELOPMENT & DEBUGGING (PRODUCTION=FALSE)
# ===========================================
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_PROFILING=false
ENABLE_DETAILED_LOGGING=false
LOG_SQL_QUERIES=false
LOG_HTTP_REQUESTS=false

# ===========================================
# CONTAINER REGISTRY
# ===========================================
CONTAINER_REGISTRY=ghcr.io
CONTAINER_REGISTRY_USERNAME=${GITHUB_USERNAME}
CONTAINER_REGISTRY_TOKEN=${GITHUB_TOKEN}
CONTAINER_IMAGE_PREFIX=medicalai
CONTAINER_TAG_STRATEGY=semver

# ===========================================
# NETWORKING & SECURITY
# ===========================================
SSL_CERT_PATH=/etc/ssl/certs/medical-ai.crt
SSL_KEY_PATH=/etc/ssl/private/medical-ai.key
SSL_CA_CERT_PATH=/etc/ssl/certs/ca.crt
NETWORK_POLICY_ENFORCED=true
SERVICE_MESH_ENABLED=true
MUTUAL_TLS_ENABLED=true

# ===========================================
# COST OPTIMIZATION
# ===========================================
SPOT_INSTANCES_ENABLED=true
AUTO_SCALING_ENABLED=true
COST_ALLOCATION_TAGS=true
BUDGET_ALERTS_ENABLED=true
DAILY_SPEND_LIMIT=1000  # USD